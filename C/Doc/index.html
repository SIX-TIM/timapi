<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TIM API C: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script><script type="text/javascript" src="../../assets/js/tim_inject.js"></script><script type="text/javascript" src="../../assets/js/sdk_version.js"></script><script type="text/javascript" src="../api_version.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="TIM API C"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TIM SDK
   </div>
   <div id="projectbrief">TIM API C</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
               
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">TIM API C Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#mpImplementationGuide">Implementation Guide</a><ul><li class="level2"><a href="#mpIntroduction">Introduction</a></li>
<li class="level2"><a href="#mpSystemOverview">System Overview</a><ul><li class="level3"><a href="#mpSetupConfiguration">Setup Configuration</a><ul><li class="level4"><a href="#mpNetworkConfiguration">Network Configuration</a></li>
<li class="level4"><a href="#mpGuideConfiguration">Guides Configuration</a></li>
</ul>
</li>
<li class="level3"><a href="#mpOperationsOverview">Operation Overview</a></li>
<li class="level3"><a href="#mpAutomatisms">Automatisms</a><ul><li class="level4"><a href="#mpAutomatismsFlows">Automatism Flows</a></li>
</ul>
</li>
<li class="level3"><a href="#mpSyncAsync">Terminal function overview</a><ul><li class="level4"><a href="#mpMainFunctions">Main / guide retail terminal functions</a></li>
<li class="level4"><a href="#mpAdministrativeFunctions">Guide dialog terminal functions</a></li>
<li class="level4"><a href="#mpOtherCallbacks">Additional callback functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><a href="#mpC">C Language Specifics</a><ul><li class="level3"><a href="#mpObjects">Objects in TIM API C</a></li>
<li class="level3"><a href="#mpMemory">Memory Management in TIM API C</a></li>
<li class="level3"><a href="#mpDataTypes">Data Types in TIM API C</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="mpImplementationGuide"></a>
Implementation Guide</h1>
<h2><a class="anchor" id="mpIntroduction"></a>
Introduction</h2>
<p>The TIM API is the standard application interface for ECR integration using SIX Payment Services terminals.</p>
<p>TIM API provides a comprehensive feature set to support the requirements of several different markets. This guideline is intended to be used by ECR integrators that need to implement the TIM API functionality in their products.</p>
<p>The following document contains an overview structure, description of the TIM API modes synchronous/asynchronous and describes the corresponding functions, notifiers and data elements that can be used with the TIM API. </p><hr/>
<h2><a class="anchor" id="mpSystemOverview"></a>
System Overview</h2>
<p>The following chapters describe a brief system overview.</p>
<h3><a class="anchor" id="mpSetupConfiguration"></a>
Setup Configuration</h3>
<p>The configuration of the <a class="el" href="terminal_8h.html">terminal</a> can be done by creating and configuring a <a class="el" href="terminal__settings_8h.html">terminal settings</a>-instance. The <a class="el" href="terminal__settings_8h.html">terminal settings</a>-instance must then be passed to the <a class="el" href="terminal_8h.html#ab71047155839a18148d9a41406db42b4">terminal_create-function</a>.</p>
<p>Once a <a class="el" href="terminal_8h.html">terminal</a>-instance has been created with a <a class="el" href="terminal__settings_8h.html">terminal settings</a>-instance, the settings can not be changed anymore. Changes to the <a class="el" href="terminal__settings_8h.html">terminal settings</a>-instance will be ignored.</p>
<p>The network and guides configuration are explained in the following two chapters. For further information refer to <a class="el" href="terminal__settings_8h.html">terminal settings</a>.</p>
<h4><a class="anchor" id="mpNetworkConfiguration"></a>
Network Configuration</h4>
<p>The TIM API module can communicate with the Terminal over different communication channels. The default communication is over TCP/IP connection.</p>
<p>For TCP/IP connection there are two possible ways to connect to the terminal:</p>
<ul>
<li><b>Broadcast-Mode:</b><ul>
<li>Terminal ID (TID) is known.</li>
<li>The TIM API starts broadcasting on the default interface and connects to the connection information sent by the matching terminal.</li>
</ul>
</li>
<li><b>Direct Connect:</b><ul>
<li>IP address of the terminal is known.</li>
<li>Connection is established directly via IP.</li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="mpGuideConfiguration"></a>
Guides Configuration</h4>
<p>There are various <a class="el" href="guides_8h.html#a1ed8648d0a123a151f1a2ef9403a4be8">guides</a> covering different use case scenarios. The guide retail (<a class="el" href="guides_8h.html#a3094ffa1812abd0acaa42bde196bf996a7bf957c6000faf4b1f1e05d10b709277">ta_c_guide_retail</a>) is the basic guide and is activated as default. With <a class="el" href="terminal__settings_8h.html#a5051c4f772fb6434d82a27850db421de">ta_terminal_settings_set_guides</a> the guides can be configured. Important: the configuration needs to include all desired guides (including the retail guide).</p>
<p>Code-example for creating a terminal including settings with activated guides retail and dialog:</p>
<div class="fragment"><div class="line"><a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> terminal = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line"><a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> settings = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line"></div><div class="line"><span class="comment">// create terminal settings instance</span></div><div class="line"><a class="code" href="terminal__settings_8h.html#a4f76fa6dd4836b8f2fee8baa5e55b62d">ta_terminal_settings_create</a>(&amp;settings);</div><div class="line"></div><div class="line"><span class="comment">// add wanted guides (with bitwise or)</span></div><div class="line"><a class="code" href="terminal__settings_8h.html#a5051c4f772fb6434d82a27850db421de">ta_terminal_settings_set_guides</a>(settings, <a class="code" href="guides_8h.html#a3094ffa1812abd0acaa42bde196bf996a7bf957c6000faf4b1f1e05d10b709277">ta_c_guide_retail</a> | <a class="code" href="guides_8h.html#a3094ffa1812abd0acaa42bde196bf996a042e1c3c7959743f87bf638fef5d75b5">ta_c_guide_dialog</a>);</div><div class="line"></div><div class="line"><span class="comment">// create terminal</span></div><div class="line"><a class="code" href="terminal_8h.html#ab71047155839a18148d9a41406db42b4">ta_terminal_create</a>(&amp;terminal, settings);</div><div class="line"></div><div class="line"><span class="comment">// release terminal settings</span></div><div class="line"><a class="code" href="object_8h.html#aa9e6e27c12a3c1e61e90080f6d0048c6">ta_object_release</a>(settings);</div><div class="line"></div><div class="line"><span class="comment">//...</span></div><div class="line"></div><div class="line"><span class="comment">// in the end release terminal as well</span></div><div class="line">ta_oject_release(terminal);</div></div><!-- fragment --><hr/>
<h3><a class="anchor" id="mpOperationsOverview"></a>
Operation Overview</h3>
<p>Follow these basic steps for using the TIM API:</p><ol type="1">
<li>Create <a class="el" href="terminal__settings_8h.html">terminal_settings</a> and initialize connection parameters (see <a class="el" href="index.html#mpSetupConfiguration">Setup Configuration</a>)</li>
<li>Create <a class="el" href="terminal_8h.html">terminal</a> instance using the created <a class="el" href="terminal__settings_8h.html">terminal_settings</a></li>
<li>Set some properties if needed:<ul>
<li>set <a class="el" href="terminal_8h.html#ae4a64a53823f3de88c66c9780d96475d">pos_id</a></li>
<li>create <a class="el" href="ecr__info_8h.html">ecr_info</a> and add with <a class="el" href="terminal_8h.html#ac6e2071bf93b33885f8d678cfe12ab9b">ta_terminal_add_ecr_data</a></li>
<li>add listeners (<a class="el" href="terminal_8h.html#a818466e97be59b5d4ecf9799d74b8074">ta_terminal_add_listener</a>)</li>
</ul>
</li>
<li><a class="el" href="terminal_8h.html#a73af37fdbac5972361a434cdabb83a36">Connect</a> and <a class="el" href="terminal_8h.html#a227343e36d8f4956c9342945109b3b26">login</a>. This can be done automatically, when the first terminal operation is called or manually using the login method.</li>
<li>Use terminal operation functions. A basic flow to show a dialog is:</li>
</ol>
<div class="image">
<img src="operations_overview.png" alt="operations_overview.png"/>
</div>
<hr/>
<h3><a class="anchor" id="mpAutomatisms"></a>
Automatisms</h3>
<p>The TIM API uses two different types of automatisms:</p>
<ul>
<li><b>Pre-Automatisms:</b> This means that all actions that need to be done before a function can be called. E.g. a transaction can be called in disconnected state without having called connect, login and activate in advance. These are called automatically by the TIM API before the transaction is performed. The Pre-Automatisms are enabled by default.</li>
<li><b>Post-Automatisms:</b> These automatisms can be enabled or disabled using the fields auto_commit and fetch_brands. A Post-Automatism is triggered after an action has been performed. E.g. if a connect has been called and fetch_brands is activated, an application_information request is called automatically after the connect. Or if auto_commit is activated a commit is performed automatically after a transaction has been made. auto_commit and fetch_brands are enabled by default.</li>
</ul>
<h4><a class="anchor" id="mpAutomatismsFlows"></a>
Automatism Flows</h4>
<p>The following diagrams show the principle of the Pre-Automatisms and Post-Automatisms. Pre-Automatisms are enabled by default and cannot be disabled. If an error occurs the started request from the ECR is returned with an error.</p>
<p><b>Synchronous flow:</b> </p><div class="image">
<img src="sync_flow.png" alt="sync_flow.png"/>
</div>
<p><b>Asynchronous flow:</b> </p><div class="image">
<img src="async_flow.png" alt="async_flow.png"/>
</div>
 <hr/>
<h3><a class="anchor" id="mpSyncAsync"></a>
Terminal function overview</h3>
<p>The basic operation mode of the terminal function calls are:</p>
<ol type="1">
<li><b>Synchronous</b> <br />
 Function calls are blocking and return after the operation has finished. Error code is provided and indicates if request was successful or not.</li>
<li><b>Asynchronous</b> <br />
 Function call returns immediately after the operation has started successfully. A user-implemented callback function will then be called, after operation has finished. All callback functions receive an <a class="el" href="structta__s__event.html">event</a>. The <a class="el" href="structta__s__event.html">event</a> contains a <a class="el" href="result__code_8h.html#ae860ee870a289833a24a586ba0c24975">result_code</a> indicating if there were errors or not. The user-implemented callback function has to be registered with <a class="el" href="terminal_8h.html#a818466e97be59b5d4ecf9799d74b8074">ta_terminal_add_listener</a>.</li>
</ol>
<p>Function calls on the terminal perform synchronous by default. The asynchronous function has the same name with "_async" appended to its name.</p>
<p>Code example for adding a terminal status listener: </p><div class="fragment"><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * Example for adding a terminal status listener</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * \param[in] terminal      Terminal instance</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keywordtype">void</span> add_status_listener(<a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> terminal) {</div><div class="line">    <a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> listener = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line">    <a class="code" href="structta__s__terminal__listener.html">ta_s_terminal_listener_t</a> listener_config;</div><div class="line"></div><div class="line">    <span class="comment">// clear listener-config</span></div><div class="line">    memset(&amp;listener_config, 0, <span class="keyword">sizeof</span>(listener_config));</div><div class="line"></div><div class="line">    <span class="comment">// add user-implemented callback to listener-config</span></div><div class="line">    listener_config.<a class="code" href="structta__s__terminal__listener.html#aacac203f3b8d7e1b30e236afce4c1833">terminal_status_changed</a> = mylistener_terminal_status_changed;</div><div class="line"></div><div class="line">    <span class="comment">// optional: add user content to listener; pointer will be handed over to all callbacks </span></div><div class="line">    <span class="comment">//listener_config.user_pointer = &amp;custom_struct;</span></div><div class="line"></div><div class="line">    <span class="comment">// create listener-object</span></div><div class="line">    <a class="code" href="terminal__listener_8h.html#ab7f5aab7a96d0f77d93e30ea0bbd6d63">ta_terminal_listener_create</a>(&amp;listener, &amp;listener_config);</div><div class="line"></div><div class="line">    <span class="comment">// add listener-object to terminal</span></div><div class="line">    <a class="code" href="terminal_8h.html#a818466e97be59b5d4ecf9799d74b8074">ta_terminal_add_listener</a>(terminal, listener);</div><div class="line"></div><div class="line">    <span class="comment">// release listener-object</span></div><div class="line">    <a class="code" href="object_8h.html#aa9e6e27c12a3c1e61e90080f6d0048c6">ta_object_release</a>(listener);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Callback for terminal status changes</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Will be called when status of terminal changes.</span></div><div class="line"><span class="comment"> * \param[in] terminal      Terminal instance</span></div><div class="line"><span class="comment"> * \param[in] user_pointer  User-pointer which can be set in the terminal listener </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keywordtype">void</span> mylistener_terminal_status_changed(<a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> terminal,   <span class="keywordtype">void</span> *user_pointer) {</div><div class="line"></div><div class="line">    <span class="comment">// implement your code to process status change here...</span></div><div class="line">    <span class="comment">//printf(&quot; &gt; listener_terminal_status_changed\n&quot;);</span></div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="mpMainFunctions"></a>
Main / guide retail terminal functions</h4>
<table class="doxtable">
<tr>
<th>Description </th><th>Sync / Async function </th><th>Callback-Function  </th></tr>
<tr>
<td>Open a user shift. </td><td><a class="el" href="terminal_8h.html#a2bc6f9272859177eae06242f6838a753">ta_terminal_activate</a> <br />
 <a class="el" href="terminal_8h.html#ac2fa510e1fee32130e71db43dc175744">ta_terminal_activate_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#acbfefabfc85c91779a0f6293988ec9a8">activate_completed</a> </td></tr>
<tr>
<td>Request the list of brands available on the terminal. </td><td><a class="el" href="terminal_8h.html#a28f11c630b476feeb2693d887edcdf10">ta_terminal_application_information<br />
</a><a class="el" href="terminal_8h.html#a736b061ade076923823e6da9a1cbd2f1">ta_terminal_application_information_async</a> </td><td><a class="el" href="terminal__listener_8h.html#ad53d815aff9026f1a6a2ce315214908c">application_information_completed</a> </td></tr>
<tr>
<td>Force the EFT Terminal to transmit all transactions to the host system as well to do the daily closing. </td><td><a class="el" href="terminal_8h.html#ac93126e2d5a90a6fd1d4c081c0466636">ta_terminal_balance</a> <br />
 <a class="el" href="terminal_8h.html#aa52006b12a61c14bb56254a0d3fd0c47">ta_terminal_balance_async</a> </td><td><a class="el" href="terminal__listener_8h.html#a1834394fe87abd900fd82c659d213159">balance_completed</a> </td></tr>
<tr>
<td>Change configuration parameters of the EFT Terminal.</td><td><a class="el" href="terminal_8h.html#a0c0df37288b7864648dc2f4dda63fa5e">ta_terminal_change_settings</a> <br />
 <a class="el" href="terminal_8h.html#aba983a6d09878c6a8363d5f2d0371b69">ta_terminal_change_settings_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a6c4a142eadf34bd6cb78592f93e976c0">change_settings_completed</a> </td></tr>
<tr>
<td>Perform Commit-operation after a successful Transaction call. </td><td><a class="el" href="terminal_8h.html#a1a8cb225510ae56543926bc6ee871a63">ta_terminal_commit</a> <br />
 <a class="el" href="terminal_8h.html#ac28f0dfe2dd8d093536c8a9e57f8423f">ta_terminal_commit_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a89b6799427e9efb30136d13bc6eb84e5">commit_completed</a> </td></tr>
<tr>
<td>Get counter information's from the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#aa22d4a5410941aa1f84b079c41c1f55b">ta_terminal_counter_request</a> <br />
 <a class="el" href="terminal_8h.html#af41be7b077cedb58a088631663dbf562">ta_terminal_counter_request_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a09e20367ed36fc49bdca81de067feb65">counter_request_completed</a> </td></tr>
<tr>
<td>Initiates a connection to the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#a73af37fdbac5972361a434cdabb83a36">ta_terminal_connect</a> <br />
 <a class="el" href="terminal_8h.html#a005d07c182cbb40410653a66c953b996">ta_terminal_connect_async</a> </td><td><a class="el" href="terminal__listener_8h.html#a9c366e642820ccbc75a0441a5a3ca021">connect_completed</a> </td></tr>
<tr>
<td>Request DCC rates from the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#af78995ee3837fc8cc3d7d928ef0b3804">ta_terminal_dcc_rates</a> <br />
 <a class="el" href="terminal_8h.html#ad0430c3351e41f715f188a95ba418ac2">ta_terminal_dcc_rates_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#ae65f5d849b59b0bbd18e28050a427006">dcc_rates_completed</a> </td></tr>
<tr>
<td>Close a user shift. </td><td><a class="el" href="terminal_8h.html#aa1acaa7b5a171a50bc9545ee0298f10a">ta_terminal_deactivate</a> <br />
 <a class="el" href="terminal_8h.html#ac4eb1659867f8fee2f20eb55cbeed13d">ta_terminal_deactivate_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#ac15317299579c6557650d267b25facbd">deactivate_completed</a> </td></tr>
<tr>
<td>Interrupts the connection to the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#a856546d592c7e3a7d51f834520a286e0">ta_terminal_disconnect</a> <br />
 <a class="el" href="terminal_8h.html#a4eccddfb01b9acb6024668cc159c8b26">ta_terminal_disconnect_async</a> </td><td><a class="el" href="terminal__listener_8h.html#ac65708ebc5bcae749739890d941c4f9c">disconnect_completed</a> </td></tr>
<tr>
<td>Get hardware information from the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#a76fe78ef3297a1c301d03402a183afe2">ta_terminal_hardware_information</a> <br />
 <a class="el" href="terminal_8h.html#a739132575842d8742f7760ce1413f9e7">ta_terminal_hardware_information_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a24085b1a97376c5f5b81220495ef65b4">hardware_information_completed</a> </td></tr>
<tr>
<td>Activate a communication session between the ECR and the terminal. </td><td><a class="el" href="terminal_8h.html#a227343e36d8f4956c9342945109b3b26">ta_terminal_login</a> <br />
 <a class="el" href="terminal_8h.html#aae9210abb8b3ed7f13f35e77e5d8c502">ta_terminal_login_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a466f9d64fe6dc475e92d7cce5da9e360">login_completed</a> </td></tr>
<tr>
<td>Terminate an active communication session between the ECR and the terminal. </td><td><a class="el" href="terminal_8h.html#a1957cf8f3ef9f996d9aa023a66e89ffa">ta_terminal_logout</a> <br />
 <a class="el" href="terminal_8h.html#a696ded13c1a732bb781903f0ae0a9721">ta_terminal_logout_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#ac92b3442702ad01db62a5aa4ba629b77">logout_completed</a> </td></tr>
<tr>
<td>Force the EFT Terminal to reboot. </td><td><a class="el" href="terminal_8h.html#a0d4de25baac4b191068991c5859ffc36">ta_terminal_reboot</a> <br />
 <a class="el" href="terminal_8h.html#adef755038ce38dd80aa562c8ec60a3f9">ta_terminal_reboot_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a364e6b36d27c1dc56376db79bd312fc0">reboot_completed</a> </td></tr>
<tr>
<td>Receive the latest receipt or a list of silent receipts. </td><td><a class="el" href="terminal_8h.html#ae713ccbe684b97d1e58be74b4d5429e7">ta_terminal_receipt_request</a> <br />
 <a class="el" href="terminal_8h.html#a51f491a0190c43e9f0e02cd17c749943">ta_terminal_receipt_request_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a2a444f5d6eb1a3ea1816577d9dbc25e1">receipt_request_completed</a> </td></tr>
<tr>
<td>Force the EFT Terminal to transmit all financial transactions to the host system. </td><td><a class="el" href="terminal_8h.html#a59d856ac7dbae4bbfa783943a1f62ed9">ta_terminal_reconciliation</a> <br />
 <a class="el" href="terminal_8h.html#a027527f1631d2e0f383e1d4103f4679f">ta_terminal_reconciliation_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a97cd8e4eaae1c97d985f18475bb2d1cb">reconciliation_completed</a> </td></tr>
<tr>
<td>Force the EFT Terminal to get the configuration from the service center. </td><td><a class="el" href="terminal_8h.html#abff257f57485515a6a2e1b3067e5f9bb">ta_terminal_reconfig</a> <br />
 <a class="el" href="terminal_8h.html#aaea67fb8914fe33312faf976ff6beae0">ta_terminal_reconfig_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#ae846a34290248b365f0c305f3b3fdf3b">reconfig_completed</a> </td></tr>
<tr>
<td>Prevent a transaction from being committed to the transaction log and generates a technical reversal of the authorization. </td><td><a class="el" href="terminal_8h.html#a679196e6de81d65f9b7bf87811448c6e">ta_terminal_rollback</a> <br />
 <a class="el" href="terminal_8h.html#a0cf6d53a5151bb2ea16e3488bdf3b89a">ta_terminal_rollback_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#aa7f2f65acecb35e2167a93c019b8f537">rollback_completed</a> </td></tr>
<tr>
<td>Force the EFT Terminal to start a Software Update. </td><td><a class="el" href="terminal_8h.html#ab98819b23fd2c8053cb324c2c551a5e7">ta_terminal_software_update</a> <br />
 <a class="el" href="terminal_8h.html#abc79783444e0f261ce1add580340867b">ta_terminal_software_update_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a96e63f65b4d6c2c67cfe801fa99089da">software_update_completed</a> </td></tr>
<tr>
<td>Request system information from the EFT Terminal. </td><td><a class="el" href="terminal_8h.html#ab9da80e9b76ae7be14cd9f8900a26b6a">ta_terminal_system_information</a> <br />
 <a class="el" href="terminal_8h.html#a1fc1f7fe4774398d5f5b1f30c322ce4d">ta_terminal_system_information_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a525bbb9e456e4db89fca49e7454f8389">system_information_completed</a> </td></tr>
<tr>
<td>Starts an EFT Terminal Transaction. </td><td><a class="el" href="terminal_8h.html#a5496a9848ca4ceebba16eab8f82a4ebe">ta_terminal_transaction</a> <br />
 <a class="el" href="terminal_8h.html#a1989dbd83629a0d617e76d3e79b42735">ta_terminal_transaction_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#acb4d8efc06602d461d8c634e92cca491">transaction_completed</a> </td></tr>
</table>
<h4><a class="anchor" id="mpAdministrativeFunctions"></a>
Guide dialog terminal functions</h4>
<table class="doxtable">
<tr>
<th>Description </th><th>Sync / Async function </th><th>Callback-Function  </th></tr>
<tr>
<td>Close dialog mode on the terminal. </td><td><a class="el" href="terminal_8h.html#a194665eed457d7dbd2e668e79a54d59c">ta_terminal_close_dialog_mode<br />
</a> <a class="el" href="terminal_8h.html#a9fc4ac1a1ec4f4e11672bbbf1e8f6e39">ta_terminal_close_dialog_mode_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a93540e1f08eacde636cab8ca4d10e64c">close_dialog_mode_completed</a> </td></tr>
<tr>
<td>Open dialog mode on the terminal. </td><td><a class="el" href="terminal_8h.html#ae7f183c210fb52783d5704bdc27b430a">ta_terminal_open_dialog_mode<br />
</a> <a class="el" href="terminal_8h.html#a86d925c56975239c0733f6426129a981">ta_terminal_open_dialog_mode_async</a>. </td><td><a class="el" href="terminal__listener_8h.html#a54782f0100eb05fb5233ddd161550d2d">open_dialog_mode_completed</a> </td></tr>
<tr>
<td>Show dialog on the terminal. </td><td><a class="el" href="terminal_8h.html#a6a753bd2963ca6e1fcbde376084fa1c7">ta_terminal_show_dialog</a> <br />
 <a class="el" href="terminal_8h.html#aac5569a46d42720a00b68050c2f02e73">ta_terminal_show_dialog_async</a> </td><td><a class="el" href="terminal__listener_8h.html#ab7a59e574c4b604844b86c7ec5ae9f3f">show_dialog_completed</a> </td></tr>
<tr>
<td>Show signature capture on the terminal. </td><td><a class="el" href="terminal_8h.html#a44fd9da3cd93e68b17e22b3d2df55876">ta_terminal_show_signature_capture</a> <br />
 <a class="el" href="terminal_8h.html#ad303432500df3ab1056f5ceca95e6efd">ta_terminal_show_signature_capture_async</a> </td><td><a class="el" href="terminal__listener_8h.html#a5b948a7e4b34f7905b1ee11c9dd20e86">show_signature_capture_completed</a> </td></tr>
</table>
<h4><a class="anchor" id="mpOtherCallbacks"></a>
Additional callback functions</h4>
<table class="doxtable">
<tr>
<th>Callback-Function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="terminal__listener_8h.html#a6547832ef93cedf0884755827f6f1e10">request_completed</a> </td><td>Operation started by an asynchronous function has finished. Applications can use both operation specific completion callback in combination with this generic completion callback. </td></tr>
<tr>
<td><a class="el" href="terminal__listener_8h.html#a8383e2be0f809fc382f307c0180bd783">terminal_status_changed</a> </td><td>The terminal status has changed. The new status can be retrieved from the TerminalStatus property. </td></tr>
</table>
<hr/>
<h2><a class="anchor" id="mpC"></a>
C Language Specifics</h2>
<h3><a class="anchor" id="mpObjects"></a>
Objects in TIM API C</h3>
<p>The TIM API C is based on an object-type concept. Most TIM API functions will either take or return parameters in shape of the "opaque type" <a class="el" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a>. For example: <a class="el" href="terminal_8h.html#ab71047155839a18148d9a41406db42b4">ta_terminal_create</a> will create a new terminal-instance, which returns a <a class="el" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a>. On the other hand terminal-function calls like <a class="el" href="terminal_8h.html#a69cd9a5fb957251c966827f7a897098e">ta_terminal_get_terminal_id</a> require the terminal-instance as parameter of type <a class="el" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a>.</p>
<p>Note: This concept introduces a behaviour similar to certain aspects of object-oriented programming to the environment of C. Similarities are as follows:</p>
<ul>
<li>For each object-type there are functions similar to getters and setters, in order to access the object-properties.<ul>
<li>The naming of getters and setters is as folllows: ta_DATATYPE_get/set_PROPERTY</li>
<li>e.g.: <a class="el" href="terminal__settings_8h.html#a73f2947a07fc9f8cefbfa7a3b0f17dfc">ta_terminal_settings_get_terminal_id()</a></li>
</ul>
</li>
<li>For each object-type there are functions similar to methods, performing object-specific tasks.<ul>
<li>e.g.: <a class="el" href="terminal_8h.html#a227343e36d8f4956c9342945109b3b26">ta_terminal_login()</a></li>
</ul>
</li>
<li>For certain object-types create-functions exist, which are similar to constructors.<ul>
<li>e.g.: <a class="el" href="string_8h.html#a36aa84b85923fa00ff19b9932307b831">ta_string_create()</a></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="mpMemory"></a>
Memory Management in TIM API C</h3>
<p>The memory needed for each object will be allocated and freed by the TIM API itself. However, the user is responsible to release retained objects, when no longer needed. Retained objects are:</p>
<ul>
<li>Objects returned by the TIM API as retained objects (e.g. <a class="el" href="terminal_8h.html">terminal</a>-instance created with <a class="el" href="terminal_8h.html#ab71047155839a18148d9a41406db42b4">ta_terminal_create</a>, or a <a class="el" href="hardware__information__response_8h.html">hardware_information_response</a>-instance returned by <a class="el" href="terminal_8h.html#a76fe78ef3297a1c301d03402a183afe2">ta_terminal_hardware_information</a>).</li>
<li>Objects that the user explicitly retained by calling <a class="el" href="object_8h.html#a9a8917ee724f85a764111fa1c2553f40">ta_object_retain</a>. Basically each <a class="el" href="object_8h.html#a9a8917ee724f85a764111fa1c2553f40">ta_object_retain</a> must be paired with a <a class="el" href="object_8h.html#aa9e6e27c12a3c1e61e90080f6d0048c6">ta_object_release</a>. The TIM API tells you if returned objects are already retained or not. An object that hasn't been retained, must not be released (would lead to errors)! Objects that are returned as not-retained are to read immediately or to explictely retain with <a class="el" href="object_8h.html#a9a8917ee724f85a764111fa1c2553f40">ta_object_retain</a>.</li>
</ul>
<p>(see header-documentation or this doxygen-dok to determine, if objects are retained / not retained. Most IDE support doxygen of header-documentation and will show these information while coding).</p>
<p>Following an example of memory management. Shown by using a list: </p><div class="fragment"><div class="line"><span class="comment">/* --- Create list -------------------------------------------------- */</span></div><div class="line"><a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> myList = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line"><a class="code" href="list_8h.html#a0444221383d06af1aa8762dbef06bd41">ta_list_create</a>(&amp;myList);</div><div class="line"></div><div class="line"><span class="comment">/* --- Add an integer ----------------------------------------------- */</span></div><div class="line"><span class="comment">// Create an object of type integer, since list can only contain </span></div><div class="line"><span class="comment">// ta_object_t-instances</span></div><div class="line"><a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> myInteger = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line"><a class="code" href="integer_8h.html#a1b0dfc5ef890c06856c475ceb448b6e6">ta_integer_create</a>(&amp;myInteger, 1234);</div><div class="line"><a class="code" href="list_8h.html#a0e4e8d8998b0cf9e906245e331f1fc7c">ta_list_add</a>(myList, myInteger);</div><div class="line"></div><div class="line"><span class="comment">// Important: User must release the integer-object. Either now or later.</span></div><div class="line"><a class="code" href="object_8h.html#aa9e6e27c12a3c1e61e90080f6d0048c6">ta_object_release</a>(myInteger); </div><div class="line"></div><div class="line"><span class="comment">/* --- Get size of list --------------------------------------------- */</span></div><div class="line"><span class="keywordtype">size_t</span> myListSize;</div><div class="line"><a class="code" href="list_8h.html#a81686d67ed6a776abc1f943c45341d7b">ta_list_get_count</a>(myList, &amp;myListSize);</div><div class="line"></div><div class="line"><span class="comment">/* --- Receive first element of list -------------------------------- */</span></div><div class="line"><a class="code" href="object_8h.html#abe102de8fe907edeca995e0d4e79b106">ta_object_t</a> myListElement = <a class="code" href="object_8h.html#a90487f9ada73238718e830f430d6f280">ta_object_invalid</a>;</div><div class="line"><a class="code" href="list_8h.html#a5918b9f407b67625e9a90fbf33562911">ta_list_get_at</a>(myList, 0, &amp;myListElement);</div><div class="line"></div><div class="line"><span class="comment">// do something with element...</span></div><div class="line"><span class="comment">// - user is responsible to know how to read / </span></div><div class="line"><span class="comment">//   process retreived objects from list</span></div><div class="line"><span class="comment">// - in our case here it&#39;s an integer-object</span></div><div class="line">int64_t myIntValue = 0;</div><div class="line"><a class="code" href="integer_8h.html#aa6af783f66a5bf3955b61273e6056608">ta_integer_get_value</a>(myListElement, &amp;myIntValue);</div><div class="line">printf(<span class="stringliteral">&quot;MyIntValue: %Id\n&quot;</span>, myIntValue);</div><div class="line"></div><div class="line"><span class="comment">// Important: </span></div><div class="line"><span class="comment">// - The list returns list elements as not retained!</span></div><div class="line"><span class="comment">// - List element must not be released!   </span></div><div class="line"></div><div class="line"><span class="comment">/* --- Release list ------------------------------------------------- */</span></div><div class="line"><a class="code" href="object_8h.html#aa9e6e27c12a3c1e61e90080f6d0048c6">ta_object_release</a>(myList);</div><div class="line"></div><div class="line"><span class="comment">// - At this point, myListElement is no longer (reliably) accessible. </span></div><div class="line"><span class="comment">//   Since list has been released, all its elements have been released </span></div><div class="line"><span class="comment">//   as well, if no one else is retaining the list elements.</span></div><div class="line"></div><div class="line"><span class="comment">// - If user still wants to use myListElement, he needs to call </span></div><div class="line"><span class="comment">//   ta_object_retain(myListElement) right after receiving it from </span></div><div class="line"><span class="comment">//   the list. In this case, he later needs to release the list </span></div><div class="line"><span class="comment">//   element with ta_object_release(myListElement).</span></div></div><!-- fragment --><h3><a class="anchor" id="mpDataTypes"></a>
Data Types in TIM API C</h3>
<p>C doesn't provide data types / collections like string, boolean, list, timedate etc. Therefore the TIM API uses and provides a set of basic data types. In various places the TIM API requires or returns these data types. </p><table class="doxtable">
<tr>
<th>Data Type </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="boolean_8h.html">boolean</a> </td><td>A Boolean type (true/false). </td></tr>
<tr>
<td><a class="el" href="integer_8h.html">integer</a> </td><td>An Integer type (64-bit). </td></tr>
<tr>
<td><a class="el" href="list_8h.html">list</a> </td><td>A list collection. Supports create, add, get, index of, remove and more. </td></tr>
<tr>
<td><a class="el" href="map_8h.html">map</a> </td><td>A map collection. Supports create, set, get, has, remove and more. </td></tr>
<tr>
<td><a class="el" href="object_8h.html">object</a> </td><td>The base object (see <a class="el" href="index.html#mpObjects">Objects in TIM API C</a>) </td></tr>
<tr>
<td><a class="el" href="string_8h.html">string</a> </td><td>A String type. Null-terminated character sequence. </td></tr>
<tr>
<td><a class="el" href="timedate_8h.html">timedate</a> </td><td>Time-Date type. </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
     
     
     
  </ul>
</div>
</body>
</html>
